<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <title>Edit Page</title>
    <meta name="description" content="Edit content here" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
  </head>

  <body>
    <style type="text/css" media="screen">
      /* Must be within <body> because of `select: body` parameter */
      textarea {
        height: 30rem;
        min-height: 10rem;
        resize: block;
      }

      form {
        position: relative;
      }

      button {
        max-width: max-content;
      }

      h1 {
        font-size: 1rem;
      }

      dialog {
        padding: 0;
        position: absolute;
        inset: unset; /* reset preset offset, upset */
        right: var(--space-phi);
        margin-top: var(--space-half);
        border: none;

        background-color: var(--bg);
        box-shadow: 0px 0px 12px -1px rgba(0, 0, 0, 0.48);

        iframe {
          border: none;
          display: block; /* maybe this should be called a bframe, amiright? */
          height: 10rem;
        }
      }
    </style>
    <h1>
      Editing
      <keep-if truthy="parameters.editingContentPath">
        <a
          x-href="parameters.editingContentPath"
          x-content="parameters.editingContentPath"
          >[filename] :-/</a
        >
      </keep-if>
      <drop-if truthy="parameters.editingContentPath"> (Template) </drop-if>
    </h1>

    <drop-if truthy="parameters.editingContentPath">
      You are viewing the edit page directly. Maybe you meant to
      <a href="?edit">edit this page</a>
      (edit the edit page)? Or if you wanted to edit another page, go to that
      page and add <code>?edit</code> to the end of the URL.
    </drop-if>
    <keep-if truthy="parameters.editingContentPath">
      <form method="POST">
        <query-content
          q="render('/system/templates/editor.fragment.html', { editContent: await render(parameters.editingContentPath,{raw: true, escape: true}) })"
        ></query-content>
      </form>
    </keep-if>
  </body>
</html>
