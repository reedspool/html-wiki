<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <title>Share Content Receiver</title>
    <meta name="description" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
  </head>

  <body>
    <drop-if truthy="true">
      <p>
        This URL is a placeholder for the shared content receiver defined in the
        <a href="./../site.webmanifest">site.webmanifest</a> file. This URL will
        be hit when the
      </p>
    </drop-if>
    <h2>Create from Shared</h2>
    <p>
      The Share API specifies the <code>title</code>, <code>url</code>, and
      <code>text</code> fields; however it's not clear how consistently callers
      use these. So here are some easy links to variations of entries you might
      want to create based on the shared data.
    </p>

    <style>
      shared-create-entry {
        h3 {
          font-size: 1rem;
          margin-block-end: 0.2rem;
        }
        h4 {
          margin-block-end: 0.2rem;
          font-size: 0.6rem;
          font-family: monospace;
        }
        file-details {
          padding-inline-start: 1rem;
          padding-block-start: 0.6rem;
          padding-block-end: 0.2rem;
          display: block;
          font-family: monospace;
          font-size: 0.8rem;
          border-top-width: 1px;
          border-left-width: 1px;
          border-right-width: 0;
          border-bottom-width: 0;
          border-style: dashed;
          border-color: black;
        }
      }
      shared-link-entry {
        width: 100%;
        display: flex;
        justify-content: space-between;
      }
    </style>
    <h3>Copy links</h3>
    <shared-link-entry copy-target-container>
      <span>[title](text)</span>
      <button
        type="button"
        copy
        copy-target
        x-content="`[${title}](${text})`"
      ></button>
    </shared-link-entry>
    <shared-link-entry copy-target-container>
      <span>[title](url)</span>
      <button
        type="button"
        copy
        copy-target
        x-content="`[${title}](${url})`"
      ></button>
    </shared-link-entry>
    <a href="actions/search-and-link.html">Search</a>
    <shared-create-entry>
      <h3>Template: From Chrome Android</h3>
      <h4>filename</h4>
      <file-details
        x-content="`${cleanFilePath(or(title,'undefined'))}.md`"
      ></file-details>
      <h4>fileContent</h4>
      <file-details>
        <span
          x-content="`# [${title}](${text})`"
        ></span>
        <br />
        <br />
        <span
          x-escape-content='`Shared from Chrome as "${title}" from &lt;${text}&gt;`'
        ></span>
      </file-details>
      <p>
        <a
          x-href="`/system/actions/create.html?filename=${cleanFilePath(or(title,'undefined'))}.md&fileContent=%23 [${title}](encodeURIComponent(${text}))%0A%0AShared from Chrome as %22${title}%22 from %3C${encodeURIComponent(text)}%3E`"
          >Go to Create the above</a
        >
      </p>
    </shared-create-entry>
    <shared-create-entry>
      <h3>Template: Trusting the API</h3>
      <h4>filename</h4>
      <file-details
        x-content="`${cleanFilePath(or(title,'undefined'))}.md`"
      ></file-details>
      <h4>fileContent</h4>
      <file-details>
        <span
          x-content="`# [${title}](${encodeURIComponent(url)})`"
        ></span>
        <br />
        <br />
        <span x-content="text"></span>
      </file-details>
      <p>
        <a
          x-href="`/system/actions/create.html?filename=${cleanFilePath(or(title,'undefined'))}.md&fileContent=%23 [${title}](${encodeURIComponent(url)})%0A%0A${text}`"
          >Go to Create the above</a
        >
      </p>
    </shared-create-entry>
    <h2>Raw Data</h2>

    <style>
      form[local] {
        display: flex;
        flex-direction: column;
        gap: var(--space-half);
        align-items: baseline;
        label {
          display: flex;
          flex-direction: column;
        }
      }
    </style>
    <script src="/system/scripts/copy-and-insert.js"></script>
    <form local method="GET" action="#">
      <label>
        <code> title </code>
        <input
          type="text"
          name="title"
          x-value="or(title,'')"
          placeholder="None supplied"
        />
      </label>
      <label>
        <code> url </code>
        <input
          type="text"
          name="url"
          x-value="or(url,'')"
          placeholder="None supplied"
        >
      </label>
      <label>
        <code> text </code>
        <input
          type="text"
          name="text"
          x-value="or(text,'')"
          placeholder="None supplied"
        >
        </input>
      </label>

      <button type="submit">Update</button>
    </form>
  </body>
</html>
